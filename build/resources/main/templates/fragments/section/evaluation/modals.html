<th:block th:fragment="problemModal">
	<div id="problemModal" class="modal">
		<div class="modal-content wide">
			<span class="close" onclick="closeProblemModal()">&times;</span>
			<h2>문제 편집</h2>
			<form id="problemForm" class="problem-form">
				<div class="form-group">
					<label>과목명</label> <input type="text" id="problemSubject" readonly>
				</div>
				<div class="eval-tabs">
					<button type="button" class="tab-btn active"
						onclick="switchTab(this, 'first')">1차 평가</button>
					<button type="button" class="tab-btn"
						onclick="switchTab(this, 'second')">2차 평가</button>
				</div>
				<div id="firstEval" class="eval-content active">
					<div class="form-group">
						<label>1차 평가 문제</label>
						<textarea id="firstProblem" class="problem-editor"></textarea>
					</div>
				</div>
				<div id="secondEval" class="eval-content">
					<div class="form-group">
						<label>2차 평가 문제</label>
						<textarea id="secondProblem" class="problem-editor"></textarea>
					</div>
				</div>
				<div class="form-actions">
					<button type="submit" class="submit-btn">저장</button>
					<button type="button" class="cancel-btn"
						onclick="closeProblemModal()">취소</button>
				</div>
			</form>
		</div>
	</div>
</th:block>

<th:block th:fragment="subjectModal">
   <div id="subjectModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSubjectModal()">&times;</span>
            <h2>과목 추가</h2>
            <form id="subjectForm" class="subject-form">
                <div class="form-group">
                    <label for="subjectName">과목명</label>
                    <input type="text" id="subjectName" required>
                </div>
                <div class="form-group">
                    <label for="firstEvalDate">1차 평가일</label>
                    <input type="date" id="firstEvalDate" required>
                </div>
                <div class="form-group">
                    <label for="secondEvalDate">2차 평가일</label>
                    <input type="date" id="secondEvalDate" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn">추가</button>
                    <button type="button" class="cancel-btn" onclick="closeSubjectModal()">취소</button>
                </div>
            </form>
        </div>
    </div>
</th:block>

<th:block th:fragment="submissionsModal">
 <div id="submissionsModal" class="modal">
        <div class="modal-content wide">
            <span class="close" onclick="closeSubmissionsModal()">&times;</span>
            <h2>제출 현황</h2>
            <div class="submissions-container">
                <div class="submissions-header">
                    <div class="subject-info">
                        <h3 id="submissionSubject"></h3>
                        <div class="eval-tabs">
                            <button type="button" class="tab-btn active" onclick="switchSubmissionTab(this, 'first')">1차 평가</button>
                            <button type="button" class="tab-btn" onclick="switchSubmissionTab(this, 'second')">2차 평가</button>
                        </div>
                    </div>
                </div>
                <div class="submissions-list">
                    <table class="submissions-table">
                        <thead>
                            <tr>
                                <th>학생명</th>
                                <th>제출 시간</th>
                                <th>상태</th>
                                <th>점수</th>
                                <th>액션</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>김학생</td>
                                <td>2024-02-01 14:30</td>
                                <td><span class="status submitted">제출완료</span></td>
                                <td>95</td>
                                <td>
                                    <button class="view-code-btn" onclick="openCodeModal('김학생')">코드 확인</button>
                                </td>
                            </tr>
                            <tr>
                                <td>이학생</td>
                                <td>2024-02-01 15:15</td>
                                <td><span class="status submitted">제출완료</span></td>
                                <td>88</td>
                                <td>
                                    <button class="view-code-btn" onclick="openCodeModal('이학생')">코드 확인</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>   
</th:block>

<th:block th:fragment="editSubjectModal">
    <div id="editSubjectModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditSubjectModal()">&times;</span>
            <h2>과목 수정</h2>
            <form id="editSubjectForm" class="subject-form">
                <div class="form-group">
                    <label for="editSubjectName">과목명</label>
                    <input type="text" id="editSubjectName" required>
                </div>
                <div class="form-group">
                    <label for="editFirstEvalDate">1차 평가일</label>
                    <input type="date" id="editFirstEvalDate" required>
                </div>
                <div class="form-group">
                    <label for="editSecondEvalDate">2차 평가일</label>
                    <input type="date" id="editSecondEvalDate" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn">수정</button>
                    <button type="button" class="cancel-btn" onclick="closeEditSubjectModal()">취소</button>
                </div>
            </form>
        </div>
    </div>
</th:block>

<th:block th:fragment="codeModal">
   <div id="codeModal" class="modal">
        <div class="modal-content wide">
            <span class="close" onclick="closeCodeModal()">&times;</span>
            <h2>제출 코드 확인</h2>
            <div class="code-review-container">
                <div class="student-code">
                    <h3>학생 코드</h3>
                    <textarea id="submittedCode" class="code-editor" readonly></textarea>
                </div>
                <div class="grading-form">
                    <div class="form-group">
                        <label for="score">점수</label>
                        <input type="number" id="score" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="feedback">피드백</label>
                        <textarea id="feedback" rows="4" maxlength="1000" placeholder="피드백을 입력하세요 (최대 1000자)"></textarea>
                        <div class="char-count">
                            <span id="currentChar">0</span>/1000자
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="submit-btn" onclick="submitGrade()">채점 완료</button>
                        <button class="cancel-btn" onclick="closeCodeModal()">취소</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</th:block>